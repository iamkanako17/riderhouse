<body>
  <header>
    <%= render "shared/header" %>
  </header>

  <main id="site-content">
    <div class="top">
      <div class="top-text" style="max-width: 1120px;">
        <h1 class="text-info">
          <%= @lodge.lodge_name %>
        </h1>
      </div>
      <div class="top-area">
        <p class="where-lodge", id="position">
          <%= @lodge.prefecture_city %>
        </p>
      </div>
    </div>

    <div class="center">
      <div class="center-image">
        <% @lodge.images.each do |image| %>
          <%= image_tag image, class:'show-images'%>
        <% end %>
      </div>
    </div>
    
    <div class="under">
      <div class="under-child1">
        <p class="child1-title">宿について</p>
        <%= @lodge.description %>
      </div>
      <div class="under-child2">
        <div id="map" style="width: 100%; height:400px;"></div>
      </div>
    </div>

    <% if host_user_signed_in? && current_host_user.id == @lodge.host_user_id %>
      <%= link_to '宿の編集', edit_lodging_path(@lodge.id), method: :get, class:"edit-btn" %>
      <%= link_to '削除', lodging_path(@lodge.id), method: :delete, class:"lodge-delete" %>
    <% else %>
      <%# <% link_to '予約する', 予約のformオブジェクトのパス(@lodge.id), httpメソッド, class:"クラス名" %>
    <% end %>
  </main>


  <footer>©️ Kanako Kurasawa2020</footer>

  <script type="text/javascript">
  function googleMap() {
    'use strict';
    var map = document.getElementById('map');
    var geocoder = new google.maps.Geocoder();

    geocoder.geocode({ address: '<%= @lodge.prefecture_city%>', region: 'jp'}, function(results, status){

      if (status === 'OK' && results[0]) {
        new google.maps.Map(map, {
          center: results[0].geometry.location,
          zoom: 12
        });
      } else {
        alert('失敗しました。 理由:' + status);
        return;
      }
      
    });
  }
  </script>
</body>
